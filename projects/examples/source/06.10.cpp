////////////////////////////////////////////////////////

// chapter : Projects and Libraries

////////////////////////////////////////////////////////

// section : Project Structure

////////////////////////////////////////////////////////

// content : Implementation Details
//
// content : Pattern Fast Pimpl

////////////////////////////////////////////////////////

#include <print>
#include <utility>

////////////////////////////////////////////////////////

#include "06.09.hpp"

////////////////////////////////////////////////////////

class Entity::Implementation
{
public :

    void test() const
    { 
        std::print("Entity::Implementation::test\n");
    }
};

////////////////////////////////////////////////////////

Entity::Entity() : m_pimpl(new Implementation) {}

////////////////////////////////////////////////////////

Entity::Entity(Entity && other) : m_pimpl(other.m_pimpl)
{
    other.m_pimpl = nullptr;
}

////////////////////////////////////////////////////////

Entity::~Entity() 
{ 
    delete m_pimpl;
}

////////////////////////////////////////////////////////

auto & Entity::operator=(Entity && other)
{
    delete m_pimpl;

    m_pimpl = std::exchange(other.m_pimpl, nullptr);

    return *this;
}

////////////////////////////////////////////////////////

void Entity::test() const
{ 
    m_pimpl->test();
}

////////////////////////////////////////////////////////