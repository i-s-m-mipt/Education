//////////////////////////////////////////////////////////////////////////////////

#include <cassert>

//////////////////////////////////////////////////////////////////////////////////

#include <zipper/3.0.2/Zipper/Unzipper.hpp>
#include <zipper/3.0.2/Zipper/Zipper.hpp>

//////////////////////////////////////////////////////////////////////////////////

int main()
{
    using Zipper = zipper::Zipper;

//  ------------------------------------------------------------------------------

    auto path = "output.zip";

//  ------------------------------------------------------------------------------

    Zipper zipper(path, Zipper::OpenFlags::Overwrite);

//  ------------------------------------------------------------------------------

    auto entry = "image.jpg";

//  ------------------------------------------------------------------------------

    zipper.add(entry, Zipper::ZipFlags::Better | Zipper::ZipFlags::SaveHierarchy);

//  ------------------------------------------------------------------------------

    zipper.close();

//  ------------------------------------------------------------------------------

    using Unzipper = zipper::Unzipper;

//  ------------------------------------------------------------------------------

    Unzipper unzipper(path);

//  ------------------------------------------------------------------------------

    assert(unzipper.entries().front().name == entry);

//  ------------------------------------------------------------------------------

    unzipper.extractAll(Unzipper::OverwriteMode::Overwrite);

//  ------------------------------------------------------------------------------

    unzipper.close();
}

//////////////////////////////////////////////////////////////////////////////////