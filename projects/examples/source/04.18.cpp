////////////////////////////////////////////////////////////////////////////////

// chapter : Generic Programming

////////////////////////////////////////////////////////////////////////////////

// section : Metaprogramming

////////////////////////////////////////////////////////////////////////////////

// content : Compile-Time Prime Number Test Algorithm

////////////////////////////////////////////////////////////////////////////////

template < int X, int D > struct Handler
{
	static inline auto const value = X % D != 0 && Handler < X, D - 1 > ::value;
};

////////////////////////////////////////////////////////////////////////////////

template < int X > struct Handler < X, 2 >
{
	static inline auto const value = X % 2 != 0;
};

////////////////////////////////////////////////////////////////////////////////

template < int X > struct Is_Prime
{
	static inline auto const value = Handler < X, X / 2 > ::value;
};

////////////////////////////////////////////////////////////////////////////////

template <> struct Is_Prime < 1 > { static inline bool const value = 0; };

template <> struct Is_Prime < 2 > { static inline bool const value = 1; };

template <> struct Is_Prime < 3 > { static inline bool const value = 1; };

////////////////////////////////////////////////////////////////////////////////

template < int X > auto const is_prime_v = Is_Prime < X > ::value;

////////////////////////////////////////////////////////////////////////////////

int main()
{
	static_assert(is_prime_v < 5 > );
}

////////////////////////////////////////////////////////////////////////////////